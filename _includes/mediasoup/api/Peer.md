## Peer
{: #Peer}

A `peer` is the local representation of a remote media endpoint that connects to **mediasoup** and sends/receives media streams.


### Properties
{: #Peer-properties}

<section markdown="1">

#### peer.name
{: #peer-name .code}

* Read only

The `name` (String) of the `peer`.

#### peer.closed
{: #peer-closed .code}

* Read only

A Boolean indicating whether the `peer` has been closed.

#### peer.appData
{: #peer-appData .code}

* Read-write

Custom data set by the application. When the `peer` is created via the [mediasoup protocol](/documentation/mediasoup-protocol/), the `appData` is filled with the corresponding field in the `join` request.

#### peer.rtpCapabilities
{: #peer-rtpCapabilities .code}

* Read only

An Object with the RTP capabilities of the `peer`, miming the syntax of [RTCRtpCapabilities](http://draft.ortc.org/#dom-rtcrtpcapabilities) in ORTC.

#### peer.transports
{: #peer-transports .code}

* Read only

An Array with the list of [WebRtcTransport](#WebRtcTransport) instances associated to the `peer` in the order in which they were created.

#### peer.producers
{: #peer-producers .code}

* Read only

An Array with the list of [Producer](#Producer) instances associated to the `peer` in the order in which they were created.

#### peer.consumers
{: #peer-consumers .code}

* Read only

An Array with the list of [Consumer](#Consumer) instances associated to the `peer` in the order in which they were created.

</section>


### Methods
{: #Peer-methods}

<section markdown="1">

#### peer.close([appData])
{: #peer-close .code}

Closes the `peer`, including all its `transports`, `producers` and `consumers`, and triggers a [`close`](#peer-on-close) event.

<div markdown="1" class="table-wrapper L3">

Argument   | Type    | Description | Required | Default 
---------- | ------- | ----------- | -------- | ----------
`appData`  | Any     | Custom app data. | No |

</div>

#### peer.getTransportById(id)
{: #peer-getTransportById .code}

Retrieves the [WebRtcTransport](#WebRtcTransport) with the given `id`, or `undefined` if not found.

<div markdown="1" class="table-wrapper L3">

Argument   | Type    | Description | Required | Default 
---------- | ------- | ----------- | -------- | ----------
`id`       | Integer | WebRtcTransport id. | Yes |

</div>

#### peer.getProducerById(id)
{: #peer-getProducerById .code}

Retrieves the [Producer](#Producer) with the given `id`, or `undefined` if not found.

<div markdown="1" class="table-wrapper L3">

Argument   | Type    | Description | Required | Default 
---------- | ------- | ----------- | -------- | ----------
`id`       | Integer | Producer id. | Yes |

</div>

#### peer.getConsumerById(id)
{: #peer-getConsumerById .code}

Retrieves the [Consumer](#Consumer) with the given `id`, or `undefined` if not found.

<div markdown="1" class="table-wrapper L3">

Argument   | Type    | Description | Required | Default 
---------- | ------- | ----------- | -------- | ----------
`id`       | Integer | Consumer id. | Yes |

</div>

#### peer.receiveRequest(request)
{: #peer-receiveRequest .code}

Provide the `peer` with a [mediasoup protocol](/documentation/mediasoup-protocol/) request payload (commonly generated by **mediasoup-client**).

<div markdown="1" class="table-wrapper L3">

Argument   | Type    | Description | Required | Default 
---------- | ------- | ----------- | -------- | ----------
`request`  | Object  | mediasoup protocol request. | Yes |

</div>

<div markdown="1" class="note">
Just mediasoup protocol requests with "peer" target must be given to this method, meaning that the mediasoup protocol payload:

* must have `target: "peer"`, and
* must **NOT** have `notification: true`.
</div>

The method returns a Promise resolving to a mediasoup protocol response payload that must be sent back to the request originator.

#### peer.receiveNotification(notification)
{: #peer-receiveNotification .code}

Provide the `peer` with a [mediasoup protocol](/documentation/mediasoup-protocol/) notification payload (commonly generated by **mediasoup-client**).

<div markdown="1" class="table-wrapper L3">

Argument   | Type    | Description | Required | Default 
---------- | ------- | ----------- | -------- | ----------
`notification` | Object  | mediasoup protocol notification. | Yes |

</div>

<div markdown="1" class="note">
Just mediasoup protocol notifications with "peer" target must be given to this method, meaning that the mediasoup protocol payload:

* must have `target: "peer"`, and
* must have `notification: true`.
</div>

The method does not return anything.

</section>


### Events
{: #Peer-events}

The `Peer` class inherits from [EventEmitter](https://nodejs.org/api/events.html#events_class_eventemitter).

<section markdown="1">

#### peer.on("close", fn(direction, appData))
{: #peer-on-close .code}

Emitted when the `peer` is closed.

<div markdown="1" class="table-wrapper L3">

Argument  | Type    | Description   
--------- | ------- | ----------------
`direction` | String | "local" or "remote".
`appData` | Any     | Custom app data.

</div>

#### peer.on("notify", fn(notification))
{: #peer-on-newproducer .code}

Emitted when a new [mediasoup protocol](/documentation/mediasoup-protocol/) notification must be sent by the Node.js application to the associated **mediasoup-client**.

<div markdown="1" class="table-wrapper L3">

Argument | Type    | Description   
-------- | ------- | ----------------
`notification` | Object | mediasoup protocol notification.

</div>

#### peer.on("newtransport", fn(webrtcTransport))
{: #peer-on-newtransport .code}

Emitted when a new `webrtcTransport` is created.

<div markdown="1" class="table-wrapper L3">

Argument | Type    | Description   
-------- | ------- | ----------------
`webrtcTransport` | [WebRtcTransport](#WebRtcTransport) | New `webrtcTransport`.

</div>

#### peer.on("newproducer", fn(producer))
{: #peer-on-newproducer .code}

Emitted when a new `producer` is created.

<div markdown="1" class="table-wrapper L3">

Argument | Type    | Description   
-------- | ------- | ----------------
`producer` | [Producer](#Producer) | New `producer`.

</div>

#### peer.on("newconsumer", fn(consumer))
{: #peer-on-newconsumer .code}

Emitted when a new `consumer` is created.

<div markdown="1" class="table-wrapper L3">

Argument | Type    | Description   
-------- | ------- | ----------------
`consumer` | [Consumer](#Consumer) | New `consumer`.

</div>

</section>
